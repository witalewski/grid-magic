(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(30)},27:function(e,t){},30:function(e,t,a){"use strict";a.r(t);var n,r,i,o,l,c,s,u,p,v=a(0),b=a.n(v),m=a(7),d=a.n(m),f=a(6),g=a(2),h=a(17),w=a.n(h),y=a(4),O=a(13),j=a.n(O),C=a(14),E=a(11),x=a(15),S=a(9),z=a(5),T=a(16),I=a(3),N=(a(29),a(1)),P=(n=function(){function e(t){Object(E.a)(this,e),Object(z.a)(this,"tileSize",r,this),Object(z.a)(this,"gapSize",i,this),Object(z.a)(this,"overlayText",o,this),Object(z.a)(this,"inputImageData",l,this),Object(z.a)(this,"baseCanvas",c,this),Object(z.a)(this,"setBaseCanvas",s,this),Object(z.a)(this,"addFile",u,this),Object(z.a)(this,"setOverlayText",p,this),this.imageProcessor=t}return Object(T.a)(e,[{key:"width",get:function(){return 3*this.tileSize+2*this.gapSize}},{key:"height",get:function(){return this.tileSize}},{key:"previewCanvas",get:function(){return this.imageProcessor.addTextToCanvas(this.baseCanvas,this.overlayText)}},{key:"downloadImages",get:function(){var e=this;return function(){return e.imageProcessor.downloadImages(e.previewCanvas,e.tileSize,e.gapSize)}}}]),e}(),r=Object(I.a)(n.prototype,"tileSize",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),i=Object(I.a)(n.prototype,"gapSize",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),o=Object(I.a)(n.prototype,"overlayText",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(I.a)(n.prototype,"width",[N.computed],Object.getOwnPropertyDescriptor(n.prototype,"width"),n.prototype),Object(I.a)(n.prototype,"height",[N.computed],Object.getOwnPropertyDescriptor(n.prototype,"height"),n.prototype),l=Object(I.a)(n.prototype,"inputImageData",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=Object(I.a)(n.prototype,"baseCanvas",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.imageProcessor.getPlaceholderCanvas(this.width,this.height,this.tileSize,this.gapSize)}}),s=Object(I.a)(n.prototype,"setBaseCanvas",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.baseCanvas=t}}}),Object(I.a)(n.prototype,"previewCanvas",[N.computed],Object.getOwnPropertyDescriptor(n.prototype,"previewCanvas"),n.prototype),u=Object(I.a)(n.prototype,"addFile",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.imageProcessor.getCanvasFromFile(t,e.width,e.height,e.tileSize,e.gapSize).then(function(t){return e.setBaseCanvas(t)})}}}),p=Object(I.a)(n.prototype,"setOverlayText",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.overlayText=t}}}),Object(I.a)(n.prototype,"downloadImages",[N.computed],Object.getOwnPropertyDescriptor(n.prototype,"downloadImages"),n.prototype),n);function F(){var e=Object(f.a)(["\n  .file-upload {\n    cursor: pointer;\n  }\n"]);return F=function(){return e},e}var k=y.a.div(F()),R=Object(g.inject)(function(e){return{addFile:e.appState.addFile}})(Object(g.observer)(function(e){var t=e.addFile;return b.a.createElement(k,null,b.a.createElement("input",{className:"file-upload",type:"file",onChange:function(e){return t(e.target.files[0])}}))}));function A(){var e=Object(f.a)(["\nheight: 100%;\n  .preview-image {\n    max-width: 100%;\n  }\n"]);return A=function(){return e},e}var D=y.a.div(A()),B=function(e){var t=e.previewCanvas;return b.a.createElement(D,{className:"row align-items-center"},b.a.createElement("div",{className:"col-12"},b.a.createElement("img",{alt:"Preview",className:"preview-image",src:t&&t.toDataURL("image/png")})))};B.defaultProps={previewCanvas:null};var L=Object(g.inject)(function(e){return{previewCanvas:e.appState.previewCanvas}})(Object(g.observer)(B)),U=Object(g.inject)(function(e){return{downloadImages:e.appState.downloadImages}})(Object(g.observer)(function(e){var t=e.downloadImages;return b.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",onClick:t},"Download images")})),W=function(e){var t=e.overlayText,a=e.setOverlayText;return b.a.createElement("form",{className:"form-inline my-2 my-lg-0"},b.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Add text...","aria-label":"Add text",value:t,onChange:function(e){var t=e.target.value;a(t)}}))};W.defaultProps={overlayText:""};var J=Object(g.inject)(function(e){var t=e.appState;return{overlayText:t.overlayText,setOverlayText:t.setOverlayText}})(Object(g.observer)(W));function G(){var e=Object(f.a)(["\n  width: 100%;\n"]);return G=function(){return e},e}var H=y.a.nav(G()),M=function(){return b.a.createElement(H,{className:"navbar navbar-expand-md navbar-light bg-light"},b.a.createElement("a",{className:"navbar-brand",href:"/"},b.a.createElement("span",{role:"img","aria-label":"Wizard emoji"},"\ud83e\uddd9\ud83c\udffb\u200d\u2640\ufe0f")," ","Grid Magic"),b.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},b.a.createElement("span",{className:"navbar-toggler-icon"})),b.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},b.a.createElement("ul",{className:"navbar-nav mr-auto"},b.a.createElement("li",{className:"nav-item"},b.a.createElement(R,null))),b.a.createElement(J,null),b.a.createElement(U,null)))};function $(){var e=Object(f.a)(["\n  @import url('https://fonts.googleapis.com/css?family=Lato');\n\n  height: 100vh;\n  font-family: 'Lato', sans-serif;\n"]);return $=function(){return e},e}var q=y.a.div($()),K=new P(new function e(){var t=this;Object(E.a)(this,e),this.getPlaceholderCanvas=function(e,t,a,n){var r=Object(S.createCanvas)(e,t),i=r.getContext("2d");return i.fillStyle="#E6E7E6",i.fillRect(0,0,e,t),i.fillStyle="white",i.fillRect(a+n,0,n,a),i.fillRect(2*a+2*n,0,n,a),r},this.getCanvasFromFile=function(){var e=Object(C.a)(j.a.mark(function e(t,a,n,r,i){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new x.a(function(e){var o=new FileReader;o.onload=function(t){var o=t.target.result,l=new Image;l.onload=function(t){var o,l,c,s,u=t.target,p=Object(S.createCanvas)(a,n),v=p.getContext("2d");v.fillStyle="white",v.fillRect(0,0,a,n);var b=u.width/u.height;b>a/n?(o=a,c=0,s=(n-(l=a/b))/2):(l=n,c=(a-(o=n*b))/2,s=0),v.drawImage(u,c,s,o,l),v.fillRect(r,0,i,r),v.fillRect(2*r+i,0,i,r),e(p)},l.src=o},o.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i){return e.apply(this,arguments)}}(),this.addTextToCanvas=function(e,t){var a=e.width,n=e.height,r=Object(S.createCanvas)(a,n),i=r.getContext("2d");return i.drawImage(e,0,0,a,n),i.fillStyle="white",i.font="600px Helvetica, Arial, sans",i.textAlign="center",i.fillText(t,a/2,n/2+220),r},this.saveBlobAsFile=function(e,t){var a=document.createElement("a");a.setAttribute("download",t),a.setAttribute("href",window.URL.createObjectURL(e)),a.click()},this.downloadImages=function(e,a,n){var r=[],i=3;[0,a+n,2*a+2*n].forEach(function(n,o){var l=Object(S.createCanvas)(a,a);l.getContext("2d").drawImage(e,n,0,a,a,0,0,a,a),l.toBlob(function(e){r[2-o]=e,--i||r.forEach(function(e,a){t.saveBlobAsFile(e,"grid-image-".concat(3-a,".png"))})})})}}),Q=function(){return b.a.createElement(g.Provider,{appState:K},b.a.createElement(q,{className:"App container-fluid"},b.a.createElement(M,null),b.a.createElement(L,null),b.a.createElement(w.a,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(b.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.af64177c.chunk.js.map